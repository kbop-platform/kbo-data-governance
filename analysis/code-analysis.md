# 코드값 분석

> 분석 일시: 2026-02-23
> 분석 대상: DB2_BASEBALL_220328 (1군 정규시즌) 실데이터 기반

## 1. TB (Top/Bottom - 팀 구분 코드)

**사용 테이블**: GAMECONTAPP, DEFEN, Hitter, Pitcher, KBO_BATRESULT, KBO_PITRESULT, Score(간접)

| 코드 | 의미 | 설명 |
|------|------|------|
| `T` | Top (원정팀) | 이닝 앞부분 공격 |
| `B` | Bottom (홈팀) | 이닝 뒷부분 공격 |

> ENTRY 테이블에서는 `TEAM` 컬럼으로 `T`/`B` 사용 (TB 컬럼 없음)

---

## 2. HOW (플레이 결과 코드)

**사용 테이블**: GAMECONTAPP (49종 코드)

### 2.1 타격 결과
| 코드 | 의미 | 건수 (2025시즌) |
|------|------|----------------|
| `H1` | 1루타 (Single) | 8,122 |
| `H2` | 2루타 (Double) | 2,243 |
| `H3` | 3루타 (Triple) | 208 |
| `HR` | 홈런 (Home Run) | 1,191 |
| `HI` | 내야안타 (Infield Hit) | 911 |
| `HB` | 번트안타 (Bunt Hit) | 149 |
| `BH` | 번트히트? / 기타 안타 | 14,749 |

### 2.2 아웃 결과
| 코드 | 의미 | 건수 |
|------|------|------|
| `GR` | 땅볼 아웃 (Ground Out) | 11,730 |
| `FL` | 플라이 아웃 (Fly Out) | 10,304 |
| `KK` | 삼진 (Strikeout, Swinging) | 9,948 |
| `KN` | 삼진 (낫아웃, Called) | 1,044 |
| `FO` | 파울 플라이 아웃 (Foul Out) | 2,438 |
| `FF` | 파울 플라이 (Foul Fly) | 1,148 |
| `GD` | 병살타 (Grounded into DP) | 1,002 |
| `IF` | 인필드 플라이 (Infield Fly) | 88 |
| `FD` | 파울 병살? (Foul DP) | 97 |
| `FC` | 야수선택 (Fielder's Choice) | 38 |
| `FE` | 실책 출루 (Error) | 32 |
| `ER` | 실책 (Error) | 850 |
| `LN` | 라인드라이브 아웃 | 42 |
| `SF` | 희생플라이 (Sacrifice Fly) | 438 |
| `SH` | 희생번트 (Sacrifice Hit) | 244 |
| `B2` | 번트 병살 | 14 |

### 2.3 볼넷/사구
| 코드 | 의미 | 건수 |
|------|------|------|
| `BB` | 볼넷 (Base on Balls) | 4,936 |
| `IB` | 고의사구 (Intentional BB) | 187 |
| `HP` | 사구 (Hit by Pitch) | 806 |

### 2.4 주루 관련
| 코드 | 의미 | 건수 |
|------|------|------|
| `SB` | 도루 (Stolen Base) | 768 |
| `CS` | 도루실패 (Caught Stealing) | 362 |
| `BN` | 보크 넘어감? (Balk) | 105 |
| `BK` | 보크 (Balk) | 35 |
| `WP` | 폭투 (Wild Pitch) | 411 |
| `PB` | 포일 (Passed Ball) | 134 |
| `OB` | 주루방해? (Obstruction) | 63 |

### 2.5 기타
| 코드 | 의미 | 건수 |
|------|------|------|
| `KB` | 삼진 후 폭투/포일 출루 | 4 |
| `KP` | 삼진 후 폭투 | 7 |
| `KW` | 삼진 후 폭투/야수선택 | 21 |
| `IN` | 미상 | 1 |
| `LF` | 라인드라이브 파울 | 38 |
| `PR` | 대주자 (Pinch Runner) | 3 |
| `SD` | 미상 | 3 |
| `TH` | 송구 | 12 |

---

## 3. PLACE (타구 방향/위치 코드)

**사용 테이블**: GAMECONTAPP (13종)

| 코드 | 의미 | 건수 |
|------|------|------|
| `0` | 해당없음 (볼넷, 삼진 등) | 14,720 |
| `1` | 투수 방면 | 459 |
| `2` | 포수 방면 | 2,654 |
| `3` | 1루수 방면 | 2,805 |
| `4` | 2루수 방면 | 5,456 |
| `5` | 3루수 방면 | 3,117 |
| `6` | 유격수 방면 | 6,116 |
| `7` | 좌익수 방면 | 7,508 |
| `8` | 중견수 방면 | 6,773 |
| `9` | 우익수 방면 | 7,062 |
| 기타 코드: | | |
| `A` | 미상 | 8 |
| `B` | 미상 | 67 |
| `C` | 미상 | 14 |
| `E` | 미상 | 11 |
| `F` | 파울 지역 | 137 |
| `H` | 미상 | 5 |
| `I` | 미상 | 2 |
| `R` | 미상 | 1,192 |
| `S` | 미상 | 18,174 |

> `S`는 삼진(Strike out)에 해당하는 것으로 추정

---

## 4. POSI (포지션 코드)

**사용 테이블**: ENTRY, DEFEN

### 4.1 ENTRY.POSI 구조
```
XY
│└─ 포지션 번호 (1~9, D, H, R)
└── 교체 순번 (1=선발, 2=1차교체, 3=2차교체, 4=3차교체, ...)
```

### 4.2 포지션 번호
| 번호 | 포지션 |
|------|--------|
| `1` | 투수 (Pitcher) |
| `2` | 포수 (Catcher) |
| `3` | 1루수 (First Base) |
| `4` | 2루수 (Second Base) |
| `5` | 3루수 (Third Base) |
| `6` | 유격수 (Shortstop) |
| `7` | 좌익수 (Left Field) |
| `8` | 중견수 (Center Field) |
| `9` | 우익수 (Right Field) |
| `D` | 지명타자 (Designated Hitter) |
| `H` | 대타 (Pinch Hitter) |
| `R` | 대주자 (Pinch Runner) |

### 4.3 예시
| 코드 | 의미 |
|------|------|
| `11` | 선발 투수 |
| `12` | 선발 포수 |
| `1D` | 선발 지명타자 |
| `21` | 1차 교체 투수 (구원투수) |
| `2H` | 1차 교체 대타 |
| `31` | 2차 교체 투수 |
| `3R` | 2차 교체 대주자 |
| `41` | 3차 교체 투수 |

---

## 5. 팀 코드 (HTEAM / VTEAM)

**사용 테이블**: GAMEINFO, PITCHCLOCK 등

| 코드 | 현재 팀명 (2025) | 역사적 변천 |
|------|-----------------|------------|
| `HH` | 키움 히어로즈 | 현대→서울→넥센→키움 |
| `HT` | KIA 타이거즈 | 해태→KIA |
| `KT` | KT 위즈 | KT (2015~) |
| `LG` | LG 트윈스 | MBC→LG |
| `LT` | 롯데 자이언츠 | 롯데 |
| `NC` | NC 다이노스 | NC (2013~) |
| `OB` | 두산 베어스 | OB→두산 |
| `SK` | SSG 랜더스 | 쌍방울→SK→SSG |
| `SS` | 삼성 라이온즈 | 삼성 |
| `WO` | 한화 이글스 | 빙그레→한화 |

---

## 6. OCOUNT (아웃 카운트)

**사용 테이블**: GAMECONTAPP

| 값 | 의미 |
|----|------|
| `0` | 0아웃 |
| `1` | 1아웃 |
| `2` | 2아웃 |
| `4` | 이닝 종료(3아웃 후) |

---

## 7. INN2 (이닝 세부)

**사용 테이블**: GAMECONTAPP, Pitcher

| 값 | 의미 |
|----|------|
| (빈값) | 일반 이닝 진행 |
| `2` | 동일 이닝 내 연장/추가 상황 |

> Pitcher.INN2는 다른 의미: 아웃수 환산 이닝 (예: `25` = 8⅓이닝 = 25아웃)

---

## 8. WLS (승패세 코드)

**사용 테이블**: Pitcher, KBO_PITRESULT

| 값 | 의미 |
|----|------|
| `W` | 승리 (Win) |
| `L` | 패배 (Loss) |
| `S` | 세이브 (Save) |
| (빈값) | 해당없음 (승패세 무관) |

---

## 9. WEATH (날씨 코드)

**사용 테이블**: GAMEINFO

| 값 | 의미 (추정) |
|----|------------|
| `C` | 맑음 (Clear) |
| `R` | 비 (Rain) |
| 기타 | 확인 필요 |

---

## 10. 신세대 테이블 코드 체계

### 10.1 GAME_HR 테이블
| 컬럼 | 값 예시 | 의미 |
|------|---------|------|
| `LE_ID` | `1` | 리그 ID |
| `SR_ID` | `0` | 시리즈 ID |
| `TB_SC` | (확인 필요) | 팀 구분 코드 |
| `PLACE_SC` | (확인 필요) | 타구 방향 코드 |
| `DIREC_SC` | (확인 필요) | 방향 코드 |

### 10.2 CANCEL_GAME 테이블
| 컬럼 | 값 | 의미 |
|------|-----|------|
| `CANCEL_SC_NM` | 한글(깨짐) | 취소 사유명 (우천취소 등) |

### 10.3 KBO_schedule 테이블
| 컬럼 | 값 | 의미 |
|------|-----|------|
| `game_flag` | `9` | 경기 유형 코드 |
| `end_flag` | `1` | 종료 플래그 |
| `cancel_flag` | `False` | 취소 여부 |
| `suspended_flag` | `False` | 서스펜디드 여부 |
| `dheader` | `0` | 더블헤더 번호 |

### 10.4 FALL_LEAGUE 코드
| 컬럼 | 값 | 의미 |
|------|-----|------|
| `GAME_SC_ID` | `70` | 경기 상태 코드 (종료=70) |
| `CANCEL_SC_ID` | `0` | 취소 코드 (0=정상) |

### 10.5 SEASON_PLAYER_HITTER 접미사
| 접미사 | 의미 | 예시 컬럼 |
|--------|------|----------|
| `_CN` | Count (건수) | `PA_CN`, `AB_CN`, `HIT_CN`, `HR_CN` |
| `_RT` | Rate (비율) | `HRA_RT`, `SB_RT`, `OBP_RT`, `SLG_RT`, `OPS_RT` |
| `_IF` | Flag (Y/N) | `GROUP_IF` |
| `_CD` | Code | `SECTION_CD` |

---

## 11. 방송 코드 (BROADCASTING_CD)

| 코드 | 방송사 |
|------|--------|
| `0` | 비해당 |
| `1` | SBS |
| `2` | KBS2 |
| `3` | KBS1 |
| `4` | MBC |
| `5` | SBS SPORTS |
| `6` | KBSN스포츠 |
| `7` | MBC SPORTS+ |
| `8` | SPOTV |
| `9` | SPOTV2 |
| `10` | TVING |
| `11` | tvN SPORTS |

---

## 12. 인코딩 이슈

- DB 문자열 인코딩: **EUC-KR (CP949)** 추정
- `varchar` 컬럼의 한글이 pymssql UTF-8 모드에서 깨짐
- `nvarchar` 컬럼은 정상 (유니코드)
- 영향 컬럼: `person.NAME`, `person.CAREER`, `STADIUM.stadium`, `TeamRank.TEAM` 등
- **권고**: 신규 시스템에서는 모든 한글 컬럼을 `nvarchar`로 전환
