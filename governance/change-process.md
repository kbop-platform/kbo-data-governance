# 변경 관리 절차

> 최종수정: 2026-02-24 | KBO 데이터 표준 정의서 (RFP DAR-001)

## 1. 개요

본 문서는 KBO 데이터 시스템의 **코드값·스키마·표준 문서**에 대한 모든 변경의 절차와 승인 주체를 정의한다.

### 1.1 적용 범위

- 코드 사전(`standards/code-dictionary.md`)의 코드값 추가·변경·폐기
- DB 스키마 변경 (컬럼 추가/삭제, 테이블 신규/삭제, 타입 변경)
- 표준 문서 개정 (`standards/`, `governance/`, `glossary/`)
- 기록 상태 전이 (`record_status_cd`)
- S2i 전송 스키마 변경에 따른 대응

### 1.2 핵심 원칙

| 원칙 | 설명 |
|------|------|
| **추적 가능성** | 모든 변경은 변경 요청서(CR)를 통해 기록하고 추적한다 |
| **하위 호환성** | 기존 API·쿼리가 깨지지 않도록 한다. 컬럼 삭제 대신 `_deprecated` 표시 |
| **최소 권한** | 변경은 해당 역할 권한 범위 내에서만 수행한다 |
| **문서 동기화** | 데이터 변경 시 관련 문서(사전, 코드, 명세)를 반드시 함께 갱신한다 |

→ 참고: [데이터 오너십 §3](./data-ownership.md#3) — 역할 R-01~R-06 정의
→ 참고: [코드 사전](../standards/code-dictionary.md) — 코드값 정의
→ 참고: [품질 규칙](./quality-rules.md) — 위반 시 처리 기준

---

## 2. 변경 유형 분류 및 처리 경로

| 유형 | 예시 | 영향도 | 승인 주체 | 처리 기간 |
|------|------|--------|----------|----------|
| **C1: 코드값 추가** | 신규 방송사 코드 추가 | 낮음 | R-05 (거버넌스 위원회) | 3영업일 |
| **C2: 코드값 의미 변경** | 기존 코드의 한글명/영문명 수정 | 중간 | R-05 (거버넌스 위원회) | 5영업일 |
| **C3: 미확인 코드 확정** | BH, place_cd R 등의 의미 확정 | 중간 | R-05 (거버넌스 위원회) | 5영업일 |
| **S1: 컬럼 추가** | 신규 테이블에 컬럼 추가 | 중간 | R-05 (거버넌스 위원회) | 5영업일 |
| **S2: 컬럼 삭제 (비활성화)** | 사용하지 않는 컬럼 _deprecated 처리 | 높음 | R-05 (거버넌스 위원회) | 10영업일 |
| **S3: 테이블 신규 생성** | SABER_HITTER_SEASON 등 | 높음 | R-05 (거버넌스 위원회) | 10영업일 |
| **S4: S2i 전송 스키마 변경** | +1 컬럼 확인, 이닝 축소 등 | 높음 | R-05 + R-01 (S2i) 합의 | 협의 |
| **D1: 표준 문서 오탈자** | 오타, 링크 수정 등 | 낮음 | R-06 (데이터팀) 자체 | 1영업일 |
| **D2: 표준 문서 내용 변경** | 규칙 변경, 정책 수정 | 중간 | R-05 (거버넌스 위원회) | 5영업일 |
| **D3: 표준 문서 구조 개편** | 문서 분할/병합, 체계 변경 | 높음 | R-05 (거버넌스 위원회) | 10영업일 |

---

## 3. 기록 상태 관리 절차 (record_status_cd)

### 3.1 상태 전이도

```
                 기록원 입력           기록위 검증           기록위 확정
  ┌─────────┐   ──────────→   ┌─────────┐   ──────────→   ┌───────────┐
  │  DRAFT  │                 │ REVIEW  │                 │ CONFIRMED │
  └─────────┘                 └─────────┘                 └─────┬─────┘
                                                                │
                                    오류 발견                     │
                              ┌─────────┐   ←──────────────────┘
                              │ REVISED │
                              └────┬────┘
                                   │     재확정
                                   └──────────→  CONFIRMED
```

### 3.2 단계별 행위자·기한

| 전이 | 행위자 | 기한 | 조건 |
|------|--------|------|------|
| → DRAFT | R-02 (기록원) | 경기 중 실시간 | 경기 시작 시 자동 생성 |
| DRAFT → REVIEW | R-02 (기록원) | 경기 종료 후 30분 이내 | 기록원이 입력 완료 확인 |
| REVIEW → CONFIRMED | R-03 (기록위원회) | 본 정의서 범위 외 — KBO 운영규정 기반 별도 확정 (익일 17시 추정) | 품질 규칙 §2~6 검증 통과 |
| CONFIRMED → REVISED | R-03 (기록위원회) | 오류 발견 즉시 | 정정 사유 필수 기재 |
| REVISED → CONFIRMED | R-03 (기록위원회) | 정정 후 24시간 이내 | 정정 내역 검증 완료 |

> 모든 상태 전이는 감사 로그에 기록된다 (data-ownership.md §8.2).

### 3.3 REVISED 처리 절차 (5단계)

확정(CONFIRMED) 후 오류가 발견된 경우:

1. **오류 보고**: R-02(기록원) 또는 R-03(기록위원회)이 오류 내역 작성
2. **상태 전환**: R-03이 `record_status_cd`를 `CONFIRMED → REVISED`로 변경
3. **데이터 수정**: R-02(기록원)가 해당 기록을 수정
4. **재검증**: R-03(기록위원회)이 수정된 기록 검증 (품질 규칙 §2~6)
5. **재확정**: 검증 통과 시 `REVISED → CONFIRMED`로 전환

> REVISED 중인 경기 기록은 외부 API·방송 시스템에서 "정정 중" 표시 권고.

→ 참고: [코드 사전 §9](../standards/code-dictionary.md#9) — record_status_cd 코드 정의

---

## 4. 코드 사전 변경 절차

### 4.1 신규 코드 추가 (유형 C1)

**예시**: 신규 방송사 코드 추가

| 단계 | 행위자 | 산출물 |
|------|--------|--------|
| 1. 변경 요청 | 요청자 (누구든) | 변경 요청서 (CR-YYYY-NNN) |
| 2. 영향 분석 | R-06 (데이터팀) | 영향 테이블 목록, API 호환성 확인 |
| 3. 코드값 결정 | R-05 (거버넌스 위원회) | 코드값, 한글명, 영문명 확정 |
| 4. 코드 사전 갱신 | R-06 (데이터팀) | `standards/code-dictionary.md` 수정 |
| 5. 관련 문서 갱신 | R-06 (데이터팀) | 필요 시 `glossary/business-terms.md`, `dictionary/` 갱신 |
| 6. 배포 | R-04 (DBA) | DB 제약조건 갱신, API 허용값 갱신 |

**방송사 추가 사례**:
```
CR-2026-001: 방송사 코드 추가
- 추가 코드: 12 = "COUPANG PLAY"
- 영향 테이블: KBO_SCHEDULE (broadcasting_cd)
- 하위 호환: 기존 코드 0~11 변경 없음
- 승인: R-05 (거버넌스 위원회) 2026-xx-xx
```

### 4.2 미확인 코드 확정 (유형 C3)

S2i 확인 후 미확인 코드의 의미를 확정하는 절차:

| 단계 | 행위자 | 산출물 |
|------|--------|--------|
| 1. S2i 회신 수령 | R-01 (S2i) → R-04 (DBA) | 코드 의미 설명 문서 |
| 2. 검토 | R-06 (데이터팀) | 기존 데이터와 의미 정합성 확인 |
| 3. 승인 | R-05 (거버넌스 위원회) | 코드값·한글명·영문명 확정 |
| 4. 코드 사전 갱신 | R-06 (데이터팀) | 부록C에서 본문으로 이동, WARNING 해제 |
| 5. 품질 규칙 갱신 | R-06 (데이터팀) | `quality-rules.md` §9에서 해당 항목 제거, §3.4에 추가 |

**현재 미확인 코드 대상** (부록C):

| 코드 | 미확인 항목 | 우선순위 |
|------|-----------|---------|
| how_cd | BH (14,749건) | **높음** |
| place_cd | R (1,192건), A~I | 중간 |
| game_type_cd | 4, 7, 8, 9 | 중간 |
| series_id | 1~9 각 의미 | 중간 |

→ 참고: [코드 사전 부록C](../standards/code-dictionary.md#c)
→ 참고: [품질 규칙 §9](./quality-rules.md#9)

---

## 5. 스키마 변경 절차

### 5.1 컬럼 추가 (유형 S1) — 7단계

| 단계 | 행위자 | 내용 |
|------|--------|------|
| 1. 변경 요청 | 요청자 | CR 작성: 컬럼명, 타입, 용도, 대상 테이블 |
| 2. 명명 규칙 검증 | R-06 (데이터팀) | `naming-rules.md` 준수 확인 (접미사, snake_case) |
| 3. 타입 검증 | R-06 (데이터팀) | `domain-types.md` 준수 확인 (도메인 타입 매핑) |
| 4. 영향 분석 | R-06 (데이터팀) | API 호환, Kafka 스키마, 기존 쿼리 영향 |
| 5. 승인 | R-05 (거버넌스 위원회) | 변경 승인 또는 반려 |
| 6. DB 반영 | R-04 (DBA) | ALTER TABLE, 인덱스 추가, 제약조건 |
| 7. 문서 갱신 | R-06 (데이터팀) | `dictionary/`, `standards/`, `glossary/` 관련 문서 갱신 |

→ 참고: [명명 규칙](../standards/naming-rules.md) — 컬럼 네이밍
→ 참고: [도메인 타입](../standards/domain-types.md) — 타입 매핑

### 5.2 컬럼 삭제 금지 원칙 (유형 S2)

**원칙**: 운영 중인 컬럼은 **삭제하지 않는다**. 대신 비활성화 처리한다.

| 단계 | 방법 |
|------|------|
| 1. 비활성화 표시 | 컬럼명에 `_deprecated` 접미사 추가 (예: `old_col_deprecated`) |
| 2. 문서 표시 | `dictionary/` 해당 파일에 "**[DEPRECATED]**" 표기, 폐기일 기재 |
| 3. 유예 기간 | 최소 **2시즌** 유지 (API 소비자가 전환할 시간 확보) |
| 4. 물리 삭제 | 유예 기간 후 R-05 승인 하에 물리 삭제 가능 |

> **사유**: 1982년부터의 과거 데이터 호환성. 컬럼 삭제 시 기존 쿼리·리포트가 깨질 수 있다.

### 5.3 S2i 전송 스키마 불일치 처리 (유형 S4)

S2i가 전송 스키마를 변경한 경우 (+1 컬럼 등):

| 단계 | 행위자 | 내용 |
|------|--------|------|
| 1. 감지 | R-04 (DBA) | 수신 데이터와 백업DB 스키마 불일치 감지 |
| 2. S2i 확인 | R-04 → R-01 (S2i) | 변경 내역·사유 확인 요청 |
| 3. 영향 분석 | R-06 (데이터팀) | DB, API, 문서 영향 범위 파악 |
| 4. 합의 | R-05 + R-01 | 수용 여부, 컬럼명·타입 합의 |
| 5. DB 반영 | R-04 (DBA) | 스키마 변경, 데이터 재수신 (필요 시) |
| 6. 문서 갱신 | R-06 (데이터팀) | `dictionary/`, `column-diff.md` 갱신 |

**현재 미해결**: 49개 테이블의 +1 컬럼 (data-ownership.md §4.2)

---

## 6. 표준 문서 개정 절차

### 6.1 개정 유형별 승인 수준

| 유형 | 예시 | 승인 | 비고 |
|------|------|------|------|
| **오탈자 수정** (D1) | 오타, 깨진 링크, 서식 | R-06 (데이터팀) 자체 | 1영업일 |
| **내용 변경** (D2) | 규칙 변경, 코드 추가, 정책 수정 | R-05 (거버넌스 위원회) | 5영업일 |
| **구조 개편** (D3) | 문서 분할/병합, 새 문서 추가 | R-05 (거버넌스 위원회) | 10영업일 |

### 6.2 개정 이력 관리

각 표준 문서 상단의 버전 태그를 갱신한다:

```markdown
> 최종수정: YYYY-MM-DD | 출처: ...
```

**개정 이력 기록 항목**:
- 개정일
- 개정 유형 (D1/D2/D3)
- 변경 요약
- 승인자
- 변경 요청서 번호 (CR-YYYY-NNN)

### 6.3 관련 문서 연쇄 업데이트 체크리스트

문서 간 참조 관계가 있으므로, 하나의 문서를 변경할 때 연쇄적으로 확인해야 하는 문서:

| 변경 문서 | 연쇄 확인 대상 |
|----------|-------------|
| `standards/naming-rules.md` | `standards/abbreviations.md`, `dictionary/` 전체 |
| `standards/code-dictionary.md` | `standards/id-system.md`, `governance/change-process.md`, `glossary/business-terms.md` |
| `standards/id-system.md` | `dictionary/` 전체, `governance/data-ownership.md` |
| `standards/domain-types.md` | `dictionary/` 전체, `governance/quality-rules.md`, `governance/table-design-guide.md` |
| `governance/data-ownership.md` | `governance/change-process.md`, `governance/quality-rules.md` |
| `governance/quality-rules.md` | `governance/change-process.md` |
| `glossary/business-terms.md` | `dictionary/` 해당 테이블 |
| `dictionary/` 또는 `standards/` | `scripts/export-excel.py` → `exports/데이터사전.xlsx` 재생성 |

---

## 7. 긴급 처리 절차 (시즌 중 Fast-Track)

정규 시즌 진행 중(3월~10월) 경기 운영에 즉시 영향을 주는 변경에 대한 신속 처리:

### 7.1 Fast-Track 대상

| 상황 | 예시 |
|------|------|
| S2i 전송 오류 | 스키마 불일치로 데이터 수신 불가 |
| 코드값 긴급 추가 | 신규 이벤트 코드 미등록으로 기록 불가 |
| 기록 정정 긴급 | 공식 기록 확정 후 중대 오류 발견 |

### 7.2 Fast-Track 절차

| 단계 | 행위자 | 기한 | 내용 |
|------|--------|------|------|
| 1. 긴급 보고 | 발견자 → R-04 (DBA) | 즉시 | 이메일/전화 통보 |
| 2. 임시 조치 | R-04 (DBA) | 2시간 이내 | 임시 코드 추가, 스키마 패치 등 |
| 3. 긴급 승인 | R-05 대표 1인 (서면/메일) | 당일 | 구두 승인 후 사후 서면 확인 |
| 4. 정식 CR 작성 | R-06 (데이터팀) | 3영업일 이내 | 사후 변경 요청서 작성 |
| 5. 문서 갱신 | R-06 (데이터팀) | 5영업일 이내 | 코드 사전, dictionary 등 갱신 |

> **유의**: Fast-Track은 시즌 중 경기 운영에 직접 영향을 주는 경우에만 적용. 일반 개선 사항은 정규 절차를 따른다.

---

## Appendix A: 변경 요청서 양식

```
변경 요청서 (Change Request)
===========================

CR 번호: CR-YYYY-NNN
요청일: YYYY-MM-DD
요청자: [이름 / 역할 ID]

1. 변경 유형
   [ ] C1: 코드값 추가
   [ ] C2: 코드값 의미 변경
   [ ] C3: 미확인 코드 확정
   [ ] S1: 컬럼 추가
   [ ] S2: 컬럼 비활성화
   [ ] S3: 테이블 신규
   [ ] S4: S2i 스키마 변경
   [ ] D1: 문서 오탈자
   [ ] D2: 문서 내용 변경
   [ ] D3: 문서 구조 개편

2. 변경 대상
   - 대상 파일/테이블: ___
   - 영향 범위: ___

3. 변경 내용
   - 현행: ___
   - 변경 후: ___
   - 변경 사유: ___

4. 영향 분석
   - 영향 테이블: ___
   - API 호환성: [ ] 하위 호환 / [ ] Breaking Change
   - 관련 문서: ___

5. 승인
   - 승인자: [이름 / 역할 ID]
   - 승인일: YYYY-MM-DD
   - 비고: ___
```

---

## Appendix B: 변경 이력

| CR 번호 | 일자 | 유형 | 요약 | 승인 |
|---------|------|------|------|------|
| — | 2026-02-24 | D3 | Phase 5 거버넌스 문서 최초 작성 | R-06 (데이터팀) |
